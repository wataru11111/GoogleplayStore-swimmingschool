<div class="container">
  <h1>お休みの変更</h1>
  <%= form_with model: @off, url: update_absence_off_path(@off), method: :patch, local: true do |f| %>
    <div>
      <%= f.label :off_month, "お休み日付" %>
      <%= f.date_field :off_month, value: @off.off_month, id: "off_month" %>
    </div>
    <div>
      <%= f.submit "変更を確定", id: "submit_button" %>
    </div>
  <% end %>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const dateField = document.getElementById("off_month");
      const submitButton = document.getElementById("submit_button");

      function checkDate() {
        const selectedDate = new Date(dateField.value);
        const today = new Date();

        // 現在の日付より前の日付が選択されている場合、ボタンを無効化
        if (selectedDate < today) {
          submitButton.disabled = true;
        } else {
          submitButton.disabled = false;
        }
      }

      // 日付フィールドの変更時にチェックを実行
      dateField.addEventListener("input", checkDate);

      // 初回チェック
      checkDate();
    });
  </script>
</div>
